{% extends 'flatpages/default.html' %}
{% load custom_filters %}

<!-- Название у нас будет products -->
{% block title %}
Посты
{% endblock title %}


<!-- В контенте на странице мы выводим все товары -->
{% block content %}
    <h1>Все посты (всего - {{ posts|length}})</h1>

    <h3>{{ time_now|date:'d M Y'}}</h3>
    <hr>
    {% if posts %}
       <table>
           <tr>
               <td>Заголовок</td>
               <td>Дата публикации</td>
               <td>Описание</td>
               <td>Рейтинг</td>
           </tr>

           {% for post in posts %}
           <tr>
               <td>{{ post.title|censor }}</td>
               <td>{{ post.time_in|date:'d M Y' }}</td>
               <td>{{ post.content_text|censor|truncatewords:20 }}</td>
               <td>{{ post.content_rate }}</td>
           </tr>
           {% endfor %}
       </table>
    {% else %}
        <h3>Новости не найдены</h3>
    {% endif %}


{% endblock content %}